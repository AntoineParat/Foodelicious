(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ed14852"],{"1aaf":function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",[i("app-navbar"),i("div",{attrs:{id:"mapBox"}},[i("div",{attrs:{id:"geocoder"}},[i("b-field",{attrs:{label:"Adresse"}},[i("gmap-autocomplete",{staticClass:"input",attrs:{id:"test",placeholder:"Indiquez un lieu",autocomplete:"off"},on:{place_changed:t.setPlace}})],1)],1),i("div",{attrs:{id:"map"}},[i("gmap-map",{ref:"gmap",staticStyle:{width:"100%",height:"60vh"},attrs:{center:t.center,zoom:t.zoom}},[t._l(t.markers,function(n,e){return i("gmap-marker",{key:e,attrs:{position:n.position},on:{click:function(i){return t.toggleInfoWindow(n,e)}}})}),i("gmap-info-window",{attrs:{options:t.infoOptions,position:t.infoWindowPos,opened:t.infoWinOpen},on:{closeclick:function(n){t.infoWinOpen=!1}}},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-image"},[i("figure",{staticClass:"image is-4by3"},[i("img",{attrs:{src:"/api/store/avatar/"+t.infoContent._id+"/"+t.infoContent.photo,alt:"Placeholder image"}})])]),i("div",{staticClass:"card-content"},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-content"},[i("p",{staticClass:"title is-4"},[t._v(t._s(t.infoContent.name))])])]),i("div",{staticClass:"content"},[i("p",{staticClass:"subtitle is-6"},t._l(t.infoContent.tags,function(n,e){return i("span",{key:e,staticClass:"tag is-light",attrs:{id:"card-tag"}},[t._v(t._s(n))])}),0),i("star-rating",{attrs:{rating:t.infoContent.rank,"read-only":!0,increment:.1,"star-size":20,"show-rating":!1}}),i("br"),i("p",[t._v(t._s(t.infoContent.adresse))]),i("router-link",{staticClass:"has-text-centered",attrs:{tag:"div",to:"/store/"+t.infoContent._id}},[i("button",{staticClass:"button is-primary"},[t._v("Voir le restaurant")])])],1)])])])],2)],1)])],1)},o=[],a=(i("7f7f"),i("ac4d"),i("8a81"),i("ac6a"),i("d178")),r=i("ca3f"),s={components:{"app-navbar":a["a"]},data:function(){return{center:{},zoom:12,markers:[],places:[],currentPlace:null,infoContent:"",infoWindowPos:{lat:0,lng:0},infoWinOpen:!1,currentMidx:null,infoOptions:{pixelOffset:{width:0,height:-40}}}},created:function(){var t=this;this.geolocate(),r["a"].getAllCoords().then(function(n){console.log(n);var i=!0,e=!1,o=void 0;try{for(var a,r=n[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var s=a.value;t.markers.push(s)}}catch(c){e=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(e)throw o}}}).then(function(){t.$refs.gmap.$mapPromise.then(function(n){var i=new google.maps.LatLngBounds,e=!0,o=!1,a=void 0;try{for(var r,s=t.markers[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var c=r.value;i.extend(c.position)}}catch(l){o=!0,a=l}finally{try{e||null==s.return||s.return()}finally{if(o)throw a}}n.fitBounds(i)})}).catch(function(t){return console.log(t)})},methods:{setPlace:function(t){this.currentPlace=t,this.center={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()},this.addMarker(),this.zoom=13},addMarker:function(){if(this.currentPlace){var t={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.center=t,this.currentPlace=null}},geolocate:function(){var t=this;navigator.geolocation.getCurrentPosition(function(n){t.center={lat:n.coords.latitude,lng:n.coords.longitude}})},toggleInfoWindow:function(t,n){this.infoWindowPos=t.position,this.infoContent=this.getInfoWindowContent(t),this.currentMidx==n?this.infoWinOpen=!this.infoWinOpen:(this.infoWinOpen=!0,this.currentMidx=n)},getInfoWindowContent:function(t){return{_id:t.infos._id,name:t.infos.name,rank:t.infos.rank,adresse:t.infos.adresse,photo:t.infos.photo,tags:t.infos.tags}}}},c=s,l=(i("65aa"),i("2877")),d=Object(l["a"])(c,e,o,!1,null,"003c3b6b",null);n["default"]=d.exports},"65aa":function(t,n,i){"use strict";var e=i("b2f3"),o=i.n(e);o.a},b2f3:function(t,n,i){}}]);
//# sourceMappingURL=chunk-3ed14852.3cf6a2c2.js.map