{"version":3,"sources":["webpack:///./src/views/Carte.vue?51cd","webpack:///src/views/Carte.vue","webpack:///./src/views/Carte.vue?1713","webpack:///./src/views/Carte.vue?2684","webpack:///./src/views/Carte.vue?a1ea"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","id","label","staticClass","placeholder","autocomplete","on","place_changed","setPlace","ref","staticStyle","width","height","center","zoom","_l","m","index","key","position","click","$event","toggleInfoWindow","options","infoOptions","infoWindowPos","opened","infoWinOpen","closeclick","src","infoContent","_id","photo","alt","_v","_s","name","tag","rating","rank","read-only","increment","star-size","show-rating","adresse","to","staticRenderFns","Cartevue_type_script_lang_js_","components","app-navbar","Navbar","data","markers","places","currentPlace","lat","lng","currentMidx","pixelOffset","created","_this","geolocate","axiosRequest","getAllCoords","then","response","console","log","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","marker","value","push","err","return","$refs","gmap","$mapPromise","map","bounds","google","maps","LatLngBounds","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","extend","fitBounds","catch","error","methods","place","geometry","location","addMarker","_this2","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","idx","getInfoWindowContent","infos","tags","views_Cartevue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Carte_vue_vue_type_style_index_0_id_003c3b6b_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Carte_vue_vue_type_style_index_0_id_003c3b6b_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-3ed14852.3cf6a2c2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('app-navbar'),_c('div',{attrs:{\"id\":\"mapBox\"}},[_c('div',{attrs:{\"id\":\"geocoder\"}},[_c('b-field',{attrs:{\"label\":\"Adresse\"}},[_c('gmap-autocomplete',{staticClass:\"input\",attrs:{\"id\":\"test\",\"placeholder\":\"Indiquez un lieu\",\"autocomplete\":\"off\"},on:{\"place_changed\":_vm.setPlace}})],1)],1),_c('div',{attrs:{\"id\":\"map\"}},[_c('gmap-map',{ref:\"gmap\",staticStyle:{\"width\":\"100%\",\"height\":\"60vh\"},attrs:{\"center\":_vm.center,\"zoom\":_vm.zoom}},[_vm._l((_vm.markers),function(m,index){return _c('gmap-marker',{key:index,attrs:{\"position\":m.position},on:{\"click\":function($event){return _vm.toggleInfoWindow(m,index)}}})}),_c('gmap-info-window',{attrs:{\"options\":_vm.infoOptions,\"position\":_vm.infoWindowPos,\"opened\":_vm.infoWinOpen},on:{\"closeclick\":function($event){_vm.infoWinOpen=false}}},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-image\"},[_c('figure',{staticClass:\"image is-4by3\"},[_c('img',{attrs:{\"src\":'/api/store/avatar/' + _vm.infoContent._id + '/' + _vm.infoContent.photo,\"alt\":\"Placeholder image\"}})])]),_c('div',{staticClass:\"card-content\"},[_c('div',{staticClass:\"media\"},[_c('div',{staticClass:\"media-content\"},[_c('p',{staticClass:\"title is-4\"},[_vm._v(_vm._s(_vm.infoContent.name))])])]),_c('div',{staticClass:\"content\"},[_c('p',{staticClass:\"subtitle is-6\"},_vm._l((_vm.infoContent.tags),function(tag,index){return _c('span',{key:index,staticClass:\"tag is-light\",attrs:{\"id\":\"card-tag\"}},[_vm._v(_vm._s(tag))])}),0),_c('star-rating',{attrs:{\"rating\":_vm.infoContent.rank,\"read-only\":true,\"increment\":0.1,\"star-size\":20,\"show-rating\":false}}),_c('br'),_c('p',[_vm._v(_vm._s(_vm.infoContent.adresse))]),_c('router-link',{staticClass:\"has-text-centered\",attrs:{\"tag\":\"div\",\"to\":'/store/' + _vm.infoContent._id}},[_c('button',{staticClass:\"button is-primary\"},[_vm._v(\"Voir le restaurant\")])])],1)])])])],2)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <app-navbar></app-navbar>\n    <div id=\"mapBox\">\n      <div id=\"geocoder\">\n        <b-field label=\"Adresse\">\n          <gmap-autocomplete\n            class=\"input\"\n            id=\"test\"\n            placeholder=\"Indiquez un lieu\"\n            autocomplete=\"off\"\n            @place_changed=\"setPlace\"\n          ></gmap-autocomplete>\n        </b-field>\n      </div>\n      <div id=\"map\">\n        <gmap-map :center=\"center\" :zoom=\"zoom\" style=\"width:100%; height: 60vh;\" ref=\"gmap\">\n          <gmap-marker\n            :key=\"index\"\n            v-for=\"(m, index) in markers\"\n            :position=\"m.position\"\n            @click=\"toggleInfoWindow(m,index)\"\n          ></gmap-marker>\n\n          <gmap-info-window\n            :options=\"infoOptions\"\n            :position=\"infoWindowPos\"\n            :opened=\"infoWinOpen\"\n            @closeclick=\"infoWinOpen=false\"\n          >\n\n            <div class=\"card\">\n              <div class=\"card-image\">\n                <figure class=\"image is-4by3\">\n                  <img :src=\" '/api/store/avatar/' + infoContent._id + '/' + infoContent.photo\" alt=\"Placeholder image\" />\n                </figure>\n              </div>\n              <div class=\"card-content\">\n                <div class=\"media\">\n                  <div class=\"media-content\">\n                    <p class=\"title is-4\">{{infoContent.name}}</p>\n                  </div>\n                </div>\n                <div class=\"content\">\n                  <p class=\"subtitle is-6\">\n                  <span\n                    id=\"card-tag\"\n                    class=\"tag is-light\"\n                    v-for=\"(tag, index) in infoContent.tags\"\n                    :key=\"index\"\n                  >{{tag}}</span>\n                </p>\n                  <star-rating\n                    :rating=\"infoContent.rank\"\n                    :read-only=\"true\"\n                    :increment=\"0.1\"\n                    :star-size=\"20\"\n                    :show-rating=\"false\"\n                  ></star-rating>\n                  <br />\n                  <p>{{infoContent.adresse}}</p>\n                  <router-link tag=\"div\" :to=\" '/store/' + infoContent._id \" class=\"has-text-centered\">\n                <button class=\"button is-primary\">Voir le restaurant</button>\n              </router-link>\n                </div>\n              </div>\n            </div>\n\n          </gmap-info-window>\n        </gmap-map>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navbar from \"@/components/Navbar.vue\";\nimport axiosRequest from \"../axiosRequest\";\nexport default {\n  components: {\n    \"app-navbar\": Navbar\n  },\n  data() {\n    return {\n      // default to Poitiers\n      // change this to whatever makes sense\n      center: {},\n      zoom: 12,\n      markers: [],\n      places: [],\n      currentPlace: null,\n      infoContent: \"\",\n      infoWindowPos: {\n        lat: 0,\n        lng: 0\n      },\n      infoWinOpen: false,\n      currentMidx: null,\n      //optional: offset infowindow so it visually sits nicely on top of our marker\n      infoOptions: {\n        pixelOffset: {\n          width: 0,\n          height: -40\n        }\n      }\n    };\n  },\n  created() {\n    this.geolocate();\n    axiosRequest\n      .getAllCoords()\n      .then(response => {\n        console.log(response);\n        for (let marker of response) {\n          this.markers.push(marker);\n        }\n      })\n      .then(() => {\n        //set bounds of the map\n        this.$refs.gmap.$mapPromise.then(map => {\n          const bounds = new google.maps.LatLngBounds();\n          for (let m of this.markers) {\n            bounds.extend(m.position);\n          }\n          map.fitBounds(bounds);\n        });\n      })\n      .catch(error => console.log(error));\n  },\n  methods: {\n    // receives a place object via the autocomplete component\n    setPlace(place) {\n      this.currentPlace = place;\n      this.center = {\n        lat: this.currentPlace.geometry.location.lat(),\n        lng: this.currentPlace.geometry.location.lng()\n      };\n      this.addMarker();\n      this.zoom = 13;\n      // console.log(this.currentPlace.formatted_address )\n    },\n    addMarker() {\n      if (this.currentPlace) {\n        const marker = {\n          lat: this.currentPlace.geometry.location.lat(),\n          lng: this.currentPlace.geometry.location.lng()\n        };\n        //Don't want to print a new marker there\n        // this.places.push(this.currentPlace);\n        this.center = marker;\n        this.currentPlace = null;\n      }\n    },\n    geolocate: function() {\n      navigator.geolocation.getCurrentPosition(position => {\n        this.center = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n      });\n    },\n    toggleInfoWindow: function(marker, idx) {\n      this.infoWindowPos = marker.position;\n      this.infoContent = this.getInfoWindowContent(marker);\n\n      //check if its the same marker that was selected if yes toggle\n      if (this.currentMidx == idx) {\n        this.infoWinOpen = !this.infoWinOpen;\n      }\n      //if different marker set infowindow to open and reset current marker index\n      else {\n        this.infoWinOpen = true;\n        this.currentMidx = idx;\n      }\n    },\n\n    getInfoWindowContent: function(marker) {\n      return {\n        _id : marker.infos._id,\n        name: marker.infos.name,\n        rank: marker.infos.rank,\n        adresse: marker.infos.adresse,\n        photo: marker.infos.photo,\n        tags : marker.infos.tags\n      };\n    }\n  }\n};\n</script>\n\n<style scoped>\n@media (max-width: 760px) {\n  #test {\n    width: 50%;\n    height: 30px;\n  }\n}\n@media (min-width: 760px) {\n  #test {\n    width: 30%;\n    height: 30px;\n  }\n}\n#mapBox {\n  margin-top: 70px;\n}\n#geocoder {\n  text-align: center;\n  margin-bottom: 40px;\n}\n#map {\n  width: 80%;\n  margin: auto;\n}\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Carte.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Carte.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Carte.vue?vue&type=template&id=003c3b6b&scoped=true&\"\nimport script from \"./Carte.vue?vue&type=script&lang=js&\"\nexport * from \"./Carte.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Carte.vue?vue&type=style&index=0&id=003c3b6b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"003c3b6b\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Carte.vue?vue&type=style&index=0&id=003c3b6b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Carte.vue?vue&type=style&index=0&id=003c3b6b&scoped=true&lang=css&\""],"sourceRoot":""}